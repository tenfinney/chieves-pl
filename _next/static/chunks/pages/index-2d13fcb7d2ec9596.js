(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{19842:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(20406),i=r(8529),s=r(95235),o=r(52746),c=r(28526),a=r.n(c),u=r(2784),l=r(97729),f=r(64033),p=r(41215),m=r(10508),d=r(83513),h=r(64618),b=r(5632),x=r(42840),v=r(79338),j=r(80038),g=r(26106),y=r(63955),O=r(52322);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=function(e){var t=e.limit,r=void 0===t?10:t,i=e.setLimit,s=e.offset,o=void 0===s?0:s,c=e.setOffset,l=e.gatingVisible,p=void 0!==l&&l,m=e.setGatingVisible,d=e.visibleList,h=void 0===d?[]:d,b=e.setVisibleList,w=(0,y.cI)(),P=w.register,N=w.handleSubmit,S=w.control,E=w.setValue,I=w.formState,_=(I.errors,I.isSubmitting,I.isDirty,function(){var e=(0,n.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({data:t}),i(Number(t.limit)),c(Number(t.offset)),m(t.gatingVisible),b(null===(r=t.visibleList)||void 0===r?void 0:r.split(/\s*,\s*/).filter((function(e){return""!==e})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return(0,u.useEffect)((function(){console.log({offset:o}),E("limit",r),E("offset",o),E("visibleList",h.join(", ")),E("gatingVisible",p)}),[r,o,h,p]),(0,O.jsxs)(f.xu,{as:"form",onSubmit:N(_),mt:10,mb:"1rem",maxW:["100%","min(85vw, 50em)"],sx:{a:{textDecoration:"underline"}},children:[(0,O.jsx)(x.NI,{children:(0,O.jsx)(f.kC,{align:"center",my:1,children:(0,O.jsx)(y.Qr,{control:S,name:"gatingVisible",defaultValue:p,render:function(e){var t=e.field,r=t.onChange,n=t.value,i=t.ref;return(0,O.jsx)(v.XZ,{onChange:r,ref:i,isChecked:n,children:"View\xa0Permission\xa0Tokens"})}})})}),(0,O.jsx)(x.NI,{children:(0,O.jsxs)(f.kC,{align:"center",maxW:"200px",my:1,children:[(0,O.jsx)(x.lX,{_after:{content:'":"'},children:"Limit"}),(0,O.jsx)(j.II,k({type:"number",placeholder:"Number of tokens to display."},P("limit")))]})}),(0,O.jsx)(x.NI,{children:(0,O.jsxs)(f.kC,{align:"center",maxW:"200px",my:1,children:[(0,O.jsx)(x.lX,{_after:{content:'":"'},children:"Offset"}),(0,O.jsx)(j.II,k({type:"number",placeholder:"Number of tokens offset from Token 1."},P("offset")))]})}),(0,O.jsx)(x.NI,{children:(0,O.jsxs)(f.kC,{align:"center",maxW:"600px",my:1,children:[(0,O.jsx)(x.lX,{_after:{content:'":"'},children:"Visible\xa0List"}),(0,O.jsx)(j.II,k({placeholder:"Comma separated list of token IDs."},P("visibleList")))]})}),(0,O.jsx)(g.zx,{type:"submit",children:"View"})]})};function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(){var e=(0,u.useState)([]),t=e[0],r=e[1],s=(0,b.useRouter)().query,c=s.gating,x=void 0!==c&&c,v=s.visible,j=s.limit,g=void 0===j?10:j,y=s.offset,w=void 0===y?0:y,k=(0,u.useState)(Number(g)),N=k[0],E=k[1],I=(0,u.useState)(Number(w)),_=I[0],C=I[1],D=(0,u.useState)(!!x),V=D[0],L=D[1],T=(0,u.useState)([]),Z=T[0],W=T[1],B=(0,h.$6)().roContract,X=function(e,t){r((function(r){return[].concat((0,o.Z)(r.slice(0,e)),[S(S({},r[e]),t)],(0,o.Z)(r.slice(e+1)))}))};return(0,u.useEffect)((function(){L(!!x)}),[x]),(0,u.useEffect)((function(){C(Number(w))}),[w]),(0,u.useEffect)((function(){E(Number(g))}),[g]),(0,u.useEffect)((function(){var e=v;if(e){if(Array.isArray(e)){var t=e;e=(0,i.Z)(t,1)[0]}console.log({v:e.split(/\s*,\s*/).filter((function(e){return""!==e}))}),W(e.split(/\s*,\s*/).filter((function(e){return""!==e})))}}),[v]),(0,u.useEffect)((function(){var e=function(){var e=(0,n.Z)(a().mark((function e(){var t,i,s,o,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=23;break}return e.t0=Number,e.next=4,B.typeSupply();case 4:return e.t1=e.sent,t=(0,e.t0)(e.t1),e.next=8,B.GATING_TYPE();case 8:return i=e.sent,e.next=11,B.TYPE_WIDTH();case 11:return s=e.sent,e.next=14,B.TYPE_BOUNDARY();case 14:return o=e.sent,c=Math.min(N,t),u=_<0?t+_:_,e.next=19,Promise.all(Array.from({length:c}).map(function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u+r+1,e.next=3,B.tokenByIndex(n);case 3:return c=e.sent,l=!V&&(c.toBigInt()&BigInt(Math.pow(2,s)-1)<<BigInt(o))===i.toBigInt()||Z.length>0&&!Z.includes(n.toString()),e.abrupt("return",{id:c.toHexString(),hide:l,index:n});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 19:return l=e.sent,r(l),e.next=23,Promise.all(l.map(function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,i,s,o,c,u,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!t.hide){e.next=3;break}return e.abrupt("return",null);case 3:return i=null,e.prev=4,e.next=7,B.uri(n);case 7:return""===(s=e.sent)&&(s=null),X(r,{uri:s}),o=(0,m._m)(s),e.next=13,fetch(o);case 13:return c=e.sent,e.next=16,c.text();case 16:if((u=e.sent)&&""!==u){e.next=19;break}throw new Error("No Data");case 19:try{i=JSON.parse(u)}catch(a){console.error("JSON Error",{error:a,data:u})}e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),console.warn({error:e.t0}),X(r,{error:null!==(l=e.t0.message)&&void 0!==l?l:e.t0});case 26:return e.prev=26,X(r,{metadata:i}),e.finish(26);case 29:return e.next=31,B["totalSupply(uint256)"](n);case 31:f=e.sent,X(r,{total:f});case 33:case"end":return e.stop()}}),e,null,[[4,22,26,29]])})));return function(t,r){return e.apply(this,arguments)}}()));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[B,V,Z,N]),(0,O.jsxs)(f.W2,{maxW:"full",children:[(0,O.jsxs)(l.default,{children:[(0,O.jsx)("title",{children:"SmartLaw Cred Tokens"}),(0,O.jsx)("meta",{name:"description",content:"SmartLaw Cred Tokens"})]}),(0,O.jsxs)(p.m$.header,{h:"30vh",children:[(0,O.jsx)(f.kC,{maxW:"40rem",margin:"auto",children:(0,O.jsx)(d.fw,{mt:"1vh",h:"10vh"})}),(0,O.jsx)(f.kC,{maxW:"40rem",margin:"auto",children:(0,O.jsx)(d.h4,{mt:"1vh",h:"20vh"})})]}),(0,O.jsxs)(p.m$.main,{children:[(0,O.jsx)(P,{limit:N,setLimit:E,offset:_,setOffset:C,gatingVisible:V,setGatingVisible:L,visibleList:Z,setVisibleList:W}),(0,O.jsx)(d.jq,{tokens:t})]})]})}},8738:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(19842)}])}},function(e){e.O(0,[730,338,513,774,888,179],(function(){return t=8738,e(e.s=t);var t}));var t=e.O();_N_E=t}]);