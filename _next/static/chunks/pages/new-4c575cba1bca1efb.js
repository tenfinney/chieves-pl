(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{27327:function(e,r,n){"use strict";n.r(r),n.d(r,{New:function(){return S}});var t=n(95235),s=n(8529),c=n(20406),a=n(28526),i=n.n(a),o=n(2728),u=n(64033),l=n(41215),d=n(42127),x=n(69204),h=n(26106),f=n(80038),p=n(86915),j=n(79338),m=n(64618),v=n(2784),b=n(2241),k=n(10508),g=n(97729),w=n(5632),y=n(63955),C=n(52322);function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var S=function(){return(0,C.jsxs)(u.W2,{maxW:"full",children:[(0,C.jsx)(g.default,{children:(0,C.jsx)("title",{children:"New SmartLaw Cred Token"})}),(0,C.jsxs)(l.m$.header,{children:[(0,C.jsx)(u.kC,{justify:"center",children:(0,C.jsx)(o.R6,{my:"1vh",maxW:"xl"})}),"      ",(0,C.jsx)(u.kC,{justify:"center",children:(0,C.jsx)(o.zV,{my:"1vh",maxW:"xl"})}),(0,C.jsx)(u.kC,{justify:"center",children:(0,C.jsx)(o.BB,{my:"1vh",maxW:"xl"})}),(0,C.jsx)(u.kC,{justify:"center",children:(0,C.jsx)(o.R6,{my:"1vh",maxW:"xl"})})]}),(0,C.jsx)(l.m$.main,{children:(0,C.jsx)(T,{})})]})},T=function(){var e=(0,m.$6)(),r=e.ensProvider,n=e.roContract,t=e.rwContract,a=e.connecting,g=e.connect,O=e.chain,S=e.address,T=(0,w.useRouter)().query.tokenId,P=(0,v.useState)(Array.isArray(T)?T[0]:T),I=P[0],_=P[1],N=(0,v.useState)([]),A=N[0],W=N[1],Z=(0,v.useState)(!1),D=Z[0],R=Z[1],$=(0,y.cI)(),z=$.register,M=$.handleSubmit,B=(0,d.pm)();(0,v.useEffect)((function(){"string"===typeof T&&_(T)}),[T]),(0,v.useEffect)((function(){var e=function(){var e=(0,c.Z)(i().mark((function e(){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return console.log({roContract:n}),e.next=4,n.roleIndexForName("ReservedLast");case 4:return e.t0=e.sent,r=e.t0-1,e.next=8,Promise.all(Array.from({length:r}).map(function(){var e=(0,c.Z)(i().mark((function e(r,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.roleNameByIndex(t+1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}()));case 8:t=e.sent,W(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]);var X=(0,v.useCallback)(function(){var e=(0,c.Z)(i().mark((function e(a){var o,u,l,d,x,h,f,p,j,m,v,b,k,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),e.prev=1,t){e.next=4;break}throw new Error("Connect your Web3 account to reserve an ID.");case 4:if(n){e.next=6;break}throw new Error("Library not loaded.");case 6:if(r){e.next=8;break}throw new Error("ENS provider not defined.");case 8:return o=[],u=[],e.next=12,Promise.all(Object.entries(a).map(function(){var e=(0,c.Z)(i().mark((function e(r){var n,c,a,l,d,x,h,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,s.Z)(r,2),c=n[0],"boolean"!==typeof(a=n[1])||!a){e.next=15;break}return d=null!==(l=c.match(/^(grant|disable)\((.+)\)$/))&&void 0!==l?l:[],x=(0,s.Z)(d,3),x[0],h=x[1],f=x[2],console.log({type:h,role:f}),e.next=6,t.roleIndexForName(f);case 6:p=e.sent,e.t0=h,e.next="grant"===e.t0?10:"disable"===e.t0?12:14;break;case 10:return o.push(p),e.abrupt("break",15);case 12:return u.push(p),e.abrupt("break",15);case 14:throw new Error("Unknown operation: ".concat(h));case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 12:if(""===(l=a.maintainer)&&(l=S),!l.includes(".")){e.next=18;break}return e.next=17,r.resolveName(l);case 17:l=e.sent;case 18:return e.next=20,t["create(address,uint8[],uint8[])"](l,o,u);case 20:return d=e.sent,e.next=23,d.wait();case 23:if(x=e.sent,h=x.events.find((function(e){return"Created"===e.event}))){e.next=27;break}throw new Error("Couldn\u2019t find a token creation event.");case 27:f=(0,s.Z)(h.args,2),p=f[0],f[1],_(p.toHexString()),e.next=36;break;case 31:e.prev=31,e.t0=e.catch(1),console.error({error:e.t0}),g=null!==(j=null!==(m=null!==(v=null===(b=e.t0.error)||void 0===b?void 0:b.message)&&void 0!==v?v:null===(k=e.t0.data)||void 0===k?void 0:k.message)&&void 0!==m?m:e.t0.message)&&void 0!==j?j:e.t0,B({title:"Creation Error",description:g,status:"error",isClosable:!0,duration:1e4});case 36:return e.prev=36,R(!1),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,31,36,39]])})));return function(r){return e.apply(this,arguments)}}(),[t]);return t&&I&&!D?(0,C.jsx)(o.g_,{tokenId:I}):(0,C.jsxs)(u.xu,{ml:"50px",children:[(0,C.jsx)(u.xv,{fontSize:"24pt",mt:"1rem",fontWeight:"bold",children:"ERC-1155 Access and Achievment Token Minting"}),(0,C.jsx)(u.xv,{ml:"20px",fontSize:"18pt",fontWeight:"bold",children:"Digital Tokens on the Polygon EVM Blockchain using IPFS"}),(0,C.jsx)(u.xv,{ml:"50px",fontSize:"12pt",fontWeight:"regular",children:"Each token reservation mints one (1) master token and up to (11) role tokens. Superuser, Minter, Caster, Transferer, Configurer, Maintainer, Creator, Limiter, Burner, Destroyer, and/or Oracle can be automatically minted with the master token and can be assigned to third-parties for administration."}),(0,C.jsx)("br",{}),(0,C.jsx)("hr",{}),(0,C.jsx)("br",{}),(0,C.jsxs)(u.M5,{children:[(0,C.jsx)("br",{}),(0,C.jsxs)(u.Kq,{children:[(0,C.jsxs)(u.X6,{textAlign:"center",children:["Create a new",(0,C.jsx)(l.m$.span,{title:"Unique Cred Token",ml:2,children:"Access Token"})]}),a?(0,C.jsxs)(u.kC,{justify:"center",children:[(0,C.jsx)(x.$,{thickness:"4px"}),(0,C.jsx)(u.xv,{ml:2,children:"Connecting\u2026"})]}):O&&O!==b.g.contract.chainId?(0,C.jsxs)(h.zx,{colorScheme:"blue",onClick:function(){(0,k.gu)(b.g.contract.chainId)},children:["Switch to the",(0,C.jsx)(l.m$.span,{mx:1.5,title:"".concat(O," \u2260 ").concat(b.g.contract.chainId),children:b.g.contract.name}),"chain"]}):t?D?(0,C.jsxs)(u.kC,{justify:"center",mt:7,children:[(0,C.jsx)(x.$,{}),(0,C.jsx)(u.xv,{ml:2,children:"Reserving your token\u2026"})]}):I?(0,C.jsx)(u.xv,{children:"We are glad you showed up!"}):(0,C.jsxs)(u.Kq,{as:"form",onSubmit:M(X),children:[(0,C.jsx)(f.II,E(E({},z("maintainer")),{},{placeholder:"Maintainer Address (default Creator)"})),(0,C.jsxs)(p.iA,{mb:5,children:[(0,C.jsx)(p.hr,{children:(0,C.jsxs)(p.Tr,{children:[(0,C.jsx)(p.Th,{children:"Role"}),(0,C.jsx)(p.Th,{children:"Grant"}),(0,C.jsx)(p.Th,{children:"Disable"})]})}),(0,C.jsx)(p.p3,{children:A.map((function(e,r){return(0,C.jsxs)(p.Tr,{children:[(0,C.jsx)(p.Td,{children:e}),(0,C.jsx)(p.Td,{textAlign:"center",children:(0,C.jsx)(j.XZ,E({},z("grant(".concat(e,")"))))}),(0,C.jsx)(p.Td,{textAlign:"center",children:(0,C.jsx)(j.XZ,E({},z("disable(".concat(e,")"))))})]},r)}))})]}),(0,C.jsx)(h.zx,{colorScheme:"green",type:"submit",children:"Reserve an ID"})]}):(0,C.jsx)(h.zx,{colorScheme:"blue",onClick:g,children:"Connect"})]})]})]})};r.default=S},18310:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return n(27327)}])}},function(e){e.O(0,[730,338,728,774,888,179],(function(){return r=18310,e(e.s=r);var r}));var r=e.O();_N_E=r}]);