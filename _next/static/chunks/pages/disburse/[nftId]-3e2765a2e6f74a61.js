(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{38624:function(e,n,t){"use strict";t.r(n);var r=t(8529),s=t(20406),a=t(28526),i=t.n(a),c=t(2784),u=t(64033),o=t(69204),l=t(42127),d=t(41135),x=t(50050),f=t(42840),v=t(46652),h=t(1525),p=t(79338),m=t(26106),j=t(97729),b=t(5632),k=t(10508),w=t(64618),C=t(2728),g=t(52322),y=function(e){var n=e.name,t=(0,w.$6)().ensProvider,r=(0,c.useMemo)((function(){return/^0x[a-z0-9]{40}$/i.test(n)}),[n]),a=(0,c.useState)(r?void 0:null),l=a[0],d=a[1];return(0,c.useMemo)((function(){if(!r){var e=function(){var e=(0,s.Z)(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.resolveName(n);case 2:r=e.sent,d(null!==r&&void 0!==r?r:"Not Found");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[r,t,n]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.xv,{children:[n,null!=l&&(0,g.jsxs)(u.xv,{ml:2,as:"em",children:["(",l,")"]})]}),null===l&&(0,g.jsx)(o.$,{size:"xs"})]})},N=function(e){return e.split(/\s*[\s,;:/\\|]+\s*/).filter((function(e){return e&&""!==e}))};n.default=function(){var e=(0,b.useRouter)().query.nftId;if(Array.isArray(e)){var n=e,t=(0,r.Z)(n,1);e=t[0]}var a=(0,c.useState)(),E=a[0],S=a[1],_=(0,c.useState)(),Z=_[0],P=_[1],T=(0,c.useState)(),F=T[0],I=T[1],O=(0,c.useState)(""),M=O[0],z=O[1],A=(0,c.useState)("whitelist"),D=A[0],X=A[1],$=(0,w.$6)(),K=$.ensProvider,L=$.address,H=$.roContract,R=$.rwContract,W=($.connected,$.connect),q=$.userProvider,V=(0,c.useState)([]),Y=V[0],B=V[1],G=(0,l.pm)();(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(N(M).map((function(e,n){return(0,g.jsx)(y,{name:e},n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[K,M]);var Q=(0,c.useMemo)((function(){var n;return null!==(n=null===Z||void 0===Z?void 0:Z.name)&&void 0!==n?n:"#".concat(e)}),[Z,e]);(0,c.useEffect)((function(){var n=function(){var n=(0,s.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(H&&L&&e)){n.next=14;break}return n.prev=1,n.t0=S,n.t1=Number,n.next=6,H.balanceOf(L,e);case 6:n.t2=n.sent.toString(),n.t3=(0,n.t1)(n.t2),(0,n.t0)(n.t3),n.next=14;break;case 11:n.prev=11,n.t4=n.catch(1),I(n.t4.message);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(){return n.apply(this,arguments)}}();n()}),[L,H,e]),(0,c.useEffect)((function(){var n=function(){var n=(0,s.Z)(i().mark((function n(){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!H||!e){n.next=23;break}return n.prev=1,n.next=4,H.uri(e);case 4:if(t=n.sent,console.log("LOOK HERE",{meta:t,tokenId:e}),t){n.next=10;break}P(null),n.next=18;break;case 10:return n.next=12,fetch((0,k._m)(t));case 12:return r=n.sent,n.t0=P,n.next=16,r.json();case 16:n.t1=n.sent,(0,n.t0)(n.t1);case 18:n.next=23;break;case 20:n.prev=20,n.t2=n.catch(1),I(n.t2.message);case 23:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(){return n.apply(this,arguments)}}();n()}),[H,e]),console.debug({rwContract:R,userProvider:q});var J=(0,c.useCallback)(function(){var n=(0,s.Z)(i().mark((function n(t){var r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),R){n.next=4;break}return G({title:"Contract Error!",description:"Token is not Connected.",status:"error",isClosable:!0,duration:1e4}),n.abrupt("return");case 4:return n.prev=4,n.next=7,Promise.all(N(M).map(function(){var e=(0,s.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===K||void 0===K?void 0:K.resolveName(n);case 2:if(t=e.sent){e.next=5;break}throw new Error("Couldn't Resolve Name: \u201c".concat(n,"\u201d"));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 7:r=n.sent,n.t0=D,n.next="mint"===n.t0?11:"whitelist"===n.t0?18:21;break;case 11:return console.debug("minting",{addrs:r}),n.next=14,null===R||void 0===R?void 0:R["mint(address[],uint256,bytes)"](r,e,[]);case 14:return a=n.sent,n.next=17,a.wait();case 17:return n.abrupt("break",21);case 18:return console.debug("whitelist",{addrs:r}),r.map(function(){var n=(0,s.Z)(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===H||void 0===H?void 0:H.roleValueForName("Minter");case 2:return n.sent,n.next=5,null===R||void 0===R?void 0:R["mint(address,uint256,uint256,bytes)"](t,e,1,[]);case 5:n.sent;case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.abrupt("break",21);case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(4),G({title:"".concat((0,k.kC)(D),"ing Error"),description:n.t1.message,status:"error",isClosable:!0,duration:1e4});case 26:case"end":return n.stop()}}),n,null,[[4,23]])})));return function(e){return n.apply(this,arguments)}}(),[D,Y,K,H,R,e]);return F?(0,g.jsxs)(d.bZ,{status:"error",children:[(0,g.jsx)(d.zM,{}),(0,g.jsx)(d.Cd,{mr:2,children:"Error: Loading NFT"}),(0,g.jsx)(d.X,{children:F})]}):(0,g.jsxs)(u.W2,{maxW:"40rem",children:[(0,g.jsxs)(j.default,{children:[(0,g.jsxs)("title",{children:["Disburse NFT #",e]}),(0,g.jsx)("meta",{name:"description",content:"Distribute A \u2019Chievemint NFT"})]}),(0,g.jsx)(C.dL,{}),(0,g.jsxs)(u.Kq,{as:"form",onSubmit:J,children:[null===Z?(0,g.jsxs)(u.xv,{my:8,children:["Token ",Q," does not exist."]}):L?null==E?(0,g.jsxs)(u.kC,{my:8,children:[(0,g.jsx)(o.$,{}),(0,g.jsx)(u.xv,{ml:2,children:"Loading Balance\u2026"})]}):(0,g.jsxs)(u.xv,{my:8,children:["Distribute up to ",E," \u201c",Q,"\u201d tokens:"]}):(0,g.jsxs)(u.xv,{my:8,children:["Connect your wallet to distribute \u201c",Q,"\u201d tokens\u2026"]}),(0,g.jsxs)(x.mQ,{isFitted:!0,variant:"enclosed",children:[(0,g.jsxs)(x.td,{mb:"1em",children:[(0,g.jsx)(x.OK,{children:"CSV"}),(0,g.jsx)(x.OK,{children:"Parsed"})]}),(0,g.jsxs)(x.nP,{children:[(0,g.jsx)(x.x4,{children:(0,g.jsxs)(f.NI,{children:[(0,g.jsx)(f.lX,{children:"Comma, Space, or Semicolon Separated ETH or ENS Addresses:"}),(0,g.jsx)(v.g,{height:64,placeholder:"Enter space, semicolon, or comma separated eth addresses.",value:M,onChange:function(e){var n=e.target.value;return z(n)}})]})}),(0,g.jsx)(x.x4,{children:(0,g.jsx)(u.GS,{children:Y.map((function(e,n){return(0,g.jsx)(u.HC,{justifyContent:"center",children:e},n)}))})})]})]}),(0,g.jsx)(f.NI,{children:(0,g.jsxs)(h.Ee,{onChange:X,value:D,children:[(0,g.jsx)(h.Y8,{value:"mint",children:"Mint"}),(0,g.jsx)(h.Y8,{value:"whitelist",ml:5,children:"Whitelist"})]})}),(0,g.jsx)(f.NI,{children:(0,g.jsx)(p.XZ,{name:"skip",value:"true",children:"Skip existing holders"})}),(0,g.jsxs)(f.NI,{textAlign:"center",children:[console.debug({rwContract:R}),R?(0,g.jsx)(m.zx,{type:"submit",colorScheme:"green",children:"Distribute"}):(0,g.jsx)(m.zx,{onClick:W,children:"Connect"})]})]})]})}},21915:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/disburse/[nftId]",function(){return t(38624)}])}},function(e){e.O(0,[730,338,728,774,888,179],(function(){return n=21915,e(e.s=n);var n}));var n=e.O();_N_E=n}]);